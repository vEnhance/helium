\chapter{Instructions for officers}
This assumes you have super-user privileges.
So it contains some higher-level administration tasks.

\section{Uploading scans}
Self-explanatory, but some gotchas:
\begin{itemize}
	\ii Pre-process the paper:
	\begin{itemize}
		\ii Remove staples from scans, if any.
		You may need to have a squad of people do this \emph{en masse}.
		\ii At the moment we don't have image processing,
		so please make sure all scans are correctly rotated.
	\end{itemize}

	\ii \textbf{Upload the scans in grayscale}, NOT black/white or color.
	Using color slows down processing, and using black/white makes the scan
	illegible since we generally print exams on colored paper.

	\ii I strongly recommend using the \textbf{following organizational procedure}:
	\begin{itemize}
		\ii Upload the scans in batches of 25 pages each.
		(Batches longer than this may cause issues on most scanners).
		\ii Number the batches $1$, $2$, \dots, $n$.
		Write the number of the batch in sharpie on the first page,
		and upload it with the number in its filename.
		\ii After scanning a batch, staple it and put it aside.
	\end{itemize}

	\ii For safety, uploaded filenames \emph{must} be distinct.
	(This is to prevent someone from accidentally submitting the form twice,
	or submitting the same PDF twice.)
	Filenames must end with either ``pdf'' or ``PDF''.

	\ii \emph{Please}, make sure you are uploading the scans
	to the correct contest!
	There are some ways to deal with such mistakes but better
	if they can be avoided in the first place.
\end{itemize}

\begin{center}
	\includegraphics[width=0.8\textwidth]{images/batchscan.png}
\end{center}

When you upload a scan,
several problem scribbles, exam scribbles, and verdicts
are immediately created corresponding to the items in the PDF file.
However since the system does not yet know who is who,
the verdicts and problem scribbles will not have an entity attached to them.
The ``match scans'' functionality will then pair them up.

It seems preferable to upload scans in smaller batches,
rather than all at once.
This way, after the first PDF is uploaded,
graders can start marking immediately
while future PDF's are uploaded.

\section{Marking exams as ready}
In the Django administration interface,
there are two switches you need to flip for every exam:
\begin{itemize}
	\ii You can mark an exam as ``ready to grade'',
	meaning that its names can be matched and its answers graded.
	\ii Separately, you can enable the uploading of scans
	(``can upload scans'').
\end{itemize}
These are safety features designed to minimize the risk
of someone accidentally uploading scans to the wrong test, for example.

\section{Dealing with troublesome name matches}
There are two ways to get to here:
\begin{itemize}
	\ii If you open ``find paper'', you will get a list of all name matches
	for which some difficulty appeared.
	\ii If you open the interface for matching exams for $X$,
	at the very bottom of the page there is a link
	to view only the scans which need administrative attention.
\end{itemize}

Some of these reasons are entered to humans:
for example, ``no name''.
Do with these as you see fit.

The tricky situation is auto-attention generated papers
which occur when a student is repeated.
Consider the following situation:
\begin{quote}
	You match a geometry exam to a student ``Christine Daae''.  
	Later on, you try to match another geometry exam
	to the same student ``Christine Daae''.
\end{quote}
This is obviously not okay, and the system will complain.
An error will appear linking to the first \emph{verdict}
it finds for a geometry problem taken by Christine Daae.

\begin{center}
	\includegraphics[width=0.7\textwidth]{images/conflict3.png}
	\includegraphics[width=0.7\textwidth]{images/conflict2.png}
\end{center}

At this point you need to fix the error.
There are a couple things you could do.
\begin{itemize}
	\ii If you made the mistake this time,
	then just re-submit the form with the correct name. Easy.

	\ii If you made the mistake the \emph{first} time around,
	then you need to go back and fix it.

	You can do this by clicking on the verdict provided by the system,
	and then opening the exam scribble for that verdict.
	Alternatively, the ``Find Papers'' interface will let you find
	the previous paper as well.
	This will bring you to a match form where you can change the
	name to the correct one.

	\ii As a last resort,
	the ``Override'' switch in the ``full scan'' page (visible only to super-users)
	will forcibly assign the paper,
	and retroactively delete all verdicts and
	problems scribbles to the contrary.
	This is a Bad Idea\texttrademark\ and you should only do it
	if you really understand Helium well and have a compelling reason to do so.
\end{itemize}

\section{Find papers}
You can locate specific papers
by selecting ``Find Papers'' from the index page.
Some ways to do so:
\begin{itemize}
	\ii You can look up by exam and entity.
	\ii You can scroll through the pages of the PDF files.
	\ii A list of papers which need moderator attention
	will appear here (see Section~\ref{sec:view_full}).
\end{itemize}

\begin{center}
	\includegraphics[width=0.6\textwidth]{images/viewpaper2.png}
\end{center}

If the paper has an exam scribble associated,
that will also be displayed,
along with a form to change the name associated to it
(in case of error).

\begin{center}
	\includegraphics[width=0.6\textwidth]{images/viewpaper1.png}
\end{center}

\section{Conflict resolution}
First, I should describe the logic behind verdicts.
For each exam there are two parameters:
\begin{itemize}
	\ii A \textbf{minimum majority} for the verdict to be valid,
	defined as a constant $n$ such that an $n$-to-$1$ majority suffices.
	\ii If valid, a \textbf{minimum number of graders} needed before
	the verdict considers itself done.
	(So setting this number to $2$ is double-grading,
	$3$ is triple-grading, etc.\ and the default is $3$.)
\end{itemize}

Officers get an extra panel called ``View All Conflicts''.
This lets you see the grading conflicts for \emph{everyone}.

\begin{center}
	\includegraphics[width=0.8\textwidth]{images/all-conflict.png}
\end{center}

Given a conflict, you can open the verdict page corresponding to it,
at which point you can submit your own evidence.
If you like being final authority,
there should also be an option to submit this evidence in ``God mode''
which will settle the verdict once and for all.
\section{Management}
Several commands are available in the \texttt{manage.py}.
Many of them are revealed through the Helium interface too:
on the dashboard, several links to Helium tasks are available.

When you push one of these such links, you'll be directed to page
which will auto-refresh once the task is done.
This is necessary since the task can potentially take very long
(algorithmic scoring).
\begin{center}
	\includegraphics[width=0.7\textwidth]{images/viewtask.png}
\end{center}

We'll talk more about these commands in the next chapter.

\section{Other Administration}
The Django admin interface can be used if there
is some operation you need to do not supported by the existing views.
\subsection{Someone uploaded PDF to wrong exam!}
Well, that's a bummer. 
Delete the relevant PDF file from the Django admin interface.
This will kill of the exam and problem scribbles too.

As of December 2016, deleted problem scribbles will also kill
off the verdict to which they were attached.
That should mostly save things. No promises though.

\subsection{A page is rotated!}
If you manage to find a rotated exam,
you can first mark the exam scribble as ``needing attention''.
This will block it from being handout out to staff members.
Then, you should probably manually grade the exam in God mode.

